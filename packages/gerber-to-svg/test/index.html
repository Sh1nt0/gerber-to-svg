<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>gerber to svg visual tests</title>
    <style type="text/css">
    body, html {
      background-color: gainsboro;
    }
    h1, h2, h3, h4 {
      margin-top: 10px;
      margin-bottom: 5px;
    }
    p {
      font-size: 12px;
    }
    svg {
      color: navy;
      border-style: dashed;
      border-width: 1px;
      border-color: black;
    }
    .test {
      display: inline-block;
      margin: 0 10px 0 10px;
    }
    .gerber {
      white-space: pre-line;
    }
    </style>
  </head>
  <body>
    <h1>gerber to svg visual tests</h1>

    <h2>big list o' tests:</h2>
    <nav id="table-of-contents">
      <ul>
        <li>
          <a href="#standard-pad-tests">standard aperture pad tests</a>
          <ul>
            <li><a href="#standard-circle-tests">circles</a></li>
            <li><a href="#standard-rectangle-tests">rectangles</a></li>
            <li><a href="#standard-obround-tests">obrounds</a></li>
            <li><a href="#standard-polygon-tests">polygons</a></li>
          </ul>
        </li>
        <li>
          <a href="macro-pad-tests">aperture macro pad tests</a>
          <ul>
            <li><a href="#macro-primitive-tests">primitives</a></li>
            <li><a href="#macro-rotation-tests">rotated primitives</a></li>
            <li><a href="#macro-exposure-tests">multiple exposures</a></li>
          </ul>
        </li>
        <li>
          <a href="#stroke-tests">stroke tests</a>
          <ul>
            <li><a href="#zero-length-stroke-tests">zero length strokes</a></li>
            <li><a href="#linear-stroke-tests">linear strokes</a></li>
            <li><a href="#special-arc-stroke-tests">special arc strokes</a></li>
            <li><a href="#single-quad-arc-stroke-tests">less than 90 deg arc strokes</a></li>
            <li><a href="#multi-quad-arc-stroke-tests">no limit arc strokes</a></li>
          </ul>
        </li>
        <li><a href="#region-tests">region tests</a></li>
        <li><a href="#polarity-tests">polarity tests</a></li>
      </ul>
    </nav>

    <h2 id="standard-pad-tests">standard aperture pad tests</h2>

    <h3 id="standard-circle-tests">circles</h3>
    <div class="test" id="circle-pad-test">
      <h4 class="title">circle</h4>
      <p class="description">circle with 0.5" diameter</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="circle-pad-circle-hole-test">
      <h4 class="title">circle with circle hole</h4>
      <p class="description">circle with 0.25" diameter hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="circle-pad-rect-hole-test">
      <h4 class="title">circle with rect hole</h4>
      <p class="description">circle with W0.25"xH0.15" hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="standard-rectangle-tests">rectangles</h3>
    <div class="test" id="rect-pad-test">
      <h4 class="title">rectangle</h4>
      <p class="description">W1.0"xH0.5" rectangle</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rect-pad-circle-hole-test">
      <h4 class="title">rectangle with circle hole</h4>
      <p class="description">rectangle with 0.25" diameter hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rect-pad-rect-hole-test">
      <h4 class="title">rectangle with rect hole</h4>
      <p class="description">rectangle with W0.25"xH0.15" hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="standard-obround-tests">obrounds</h3>
    <div class="test" id="obround-pad-test">
      <h4 class="title">obround</h4>
      <p class="description">W1.0"xH0.5" obround</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="obround-pad-circle-hole-test">
      <h4 class="title">obround with circle hole</h4>
      <p class="description">obround with 0.25" diameter hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="obround-pad-rect-hole-test">
      <h4 class="title">obround with rect hole</h4>
      <p class="description">obround with W0.25"xH0.15" hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="standard-polygon-tests">polygons</h3>
    <div class="test" id="polygon-pad-test">
      <h4 class="title">polygon</h4>
      <p class="description">All available regular polygons with 0.5" circumscribed diameter and 0.6" spacing</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="polygon-pad-rotation-test">
      <h4 class="title">rotated polygon</h4>
      <p class="description">hexagon rotated 20 deg CCW</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="polygon-pad-circle-hole-test">
      <h4 class="title">polygon with circle hole</h4>
      <p class="description">hexagon with 0.25" diameter hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="polygon-pad-rect-hole-test">
      <h4 class="title">polygon with rect hole</h4>
      <p class="description">hexagon with W0.25"xH0.15" hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h2 id="macro-pad-tests">aperture macro pad tests</h2>

    <h3 id="macro-primitive-tests">primitives</h3>
    <div class="test" id="circle-macro-test">
      <h4 class="title">circle</h4>
      <p class="description">circle with 0.5" diameter</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="vector-macro-test">
      <h4 class="title">vector line</h4>
      <p class="description">0.25" inch line from 0,0 to .5,.5</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="center-rect-macro-test">
      <h4 class="title">center rectangle</h4>
      <p class="description">W0.5"XH0.25" rectangle</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="lower-left-rect-macro-test">
      <h4 class="title">lower-left rectangle</h4>
      <p class="description">W0.5"XH0.25" rectangle</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="outline-macro-test">
      <h4 class="title">outline polygon</h4>
      <p class="description">0,0 -> 0,0.5 -> 0.5,0.5 outline</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="polygon-macro-test">
      <h4 class="title">regular pentagon</h4>
      <p class="description">0.5" diameter pentagon</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="moire-macro-test">
      <h4 class="title">moires</h4>
      <p class="description">moires with 2 rings and 3 rings and a circle</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="thermal-macro-test">
      <h4 class="title">thermal</h4>
      <p class="description">OD0.5" ID0.4" thermal</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="macro-rotation-tests">rotated primitives</h3>
    <div class="test" id="rotated-vector-macro-test">
      <h4 class="title">vector line</h4>
      <p class="description">vector rotated 130 degrees CCW</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rotated-center-rect-macro-test">
      <h4 class="title">center rectangle</h4>
      <p class="description">center rectangle rotated 45 degrees CCW</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rotated-lower-left-rect-macro-test">
      <h4 class="title">lower-left rectangle</h4>
      <p class="description">lower-left rectangle rotated 90 degrees CW</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rotated-outline-macro-test">
      <h4 class="title">outline polygon</h4>
      <p class="description">outline polygon rotated 180 degrees</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rotated-polygon-macro-test">
      <h4 class="title">regular pentagon</h4>
      <p class="description">pentagon rotated 18 degrees CCW</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rotated-moire-macro-test">
      <h4 class="title">moires</h4>
      <p class="description">moires rotated 63 degrees CCW</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="rotated-thermal-macro-test">
      <h4 class="title">thermal</h4>
      <p class="description">thermal rotated 25 degrees CW</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="macro-exposure-tests">macros with multiple exposure levels</h3>
    <div class="test" id="multiple-exposure-macro-dark">
      <h4 class="title">multiple exposure macro exposing</h4>
      <p class="description">multiple exposure macro flashing a dark level</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multiple-exposure-macro-clear">
      <h4 class="title">multiple exposure macro clearing</h4>
      <p class="description">same macro flashing on a clear level</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="thermal-macro-clear">
      <h4 class="title">thermal macro clearing</h4>
      <p class="description">same macro flashing on a clear level</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="moire-macro-clear">
      <h4 class="title">moire macro clearing</h4>
      <p class="description">same macro flashing on a clear level</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h2 id="stroke-tests">aperture stroking tests</h3>

    <h3 id="zero-length-stroke-tests">zero-length stroke tests</h3>
    <div class="test" id="zero-length-rect-stroke-test">
      <h4 class="title">zero-length rectangular stroke</h4>
      <p class="description">zero-length rectangular stroke (left) should match
        rectangular pad (right)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="zero-length-circle-stroke-test">
      <h4 class="title">zero-length circular stroke</h4>
      <p class="description">zero-length circular stroke (left) should match
        circular pad (right)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="linear-stroke-tests">linear stroke tests</h3>
    <div class="test" id="single-rect-stroke-test">
      <h4 class="title">single rectangular stroke</h4>
      <p class="description">stroke should be rectangle dragged without rotation
        in a straight line</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="single-circle-stroke-test">
      <h4 class="title">single circular stroke</h4>
      <p class="description">stroke should be a line with round ends</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-rect-stroke-test">
      <h4 class="title">multiple rectangular strokes</h4>
      <p class="description">stroke should be rectangle dragged without rotation
        in four straight line segments</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-circle-stroke-test">
      <h4 class="title">multiple circular strokes</h4>
      <p class="description">stroke should be four line segments with round
        ends and round joins</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="special-arc-stroke-tests">edge case arc stroke tests</h3>
    <div class="test" id="zero-length-arc-stroke-test">
      <h4 class="title">zero-length arc stroke</h4>
      <p class="description">in single quadrant mode, a arc with matching start
        and end points (left) is a zero-length stroke that matches a flash
        (right)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="full-circle-arc-stroke-test">
      <h4 class="title">full circle arc stroke</h4>
      <p class="description">in multi quadrant mode, an arc with matching start
        and end points is a full circle (left CCW, right CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="single-quad-arc-stroke-tests">less than 90 deg arc stroke tests</h3>
    <div class="test" id="single-quad-I-II-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant I and II</h4>
      <p class="description">top arc (CCW) should match bottom arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="single-quad-II-III-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant II and III</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="single-quad-III-IV-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant III and IV</h4>
      <p class="description">bottom arc (CCW) should match top arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="single-quad-IV-I-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant IV and I</h4>
      <p class="description">right arc (CCW) should match left arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h3 id="multi-quad-arc-stroke-tests">no rotation limit arc stroke tests</h3>
    <div class="test" id="multi-quad-I-II-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant I and II</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-I-III-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant I and III</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-I-IV-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant I and IV</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-II-III-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant II and III</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-II-IV-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant II and IV</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-II-I-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant II and I</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-III-IV-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant III and IV</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-III-I-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant III and I</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-III-II-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant III and II</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-IV-I-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant IV and I</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-IV-II-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant IV and II</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="multi-quad-IV-III-arc-stroke-test">
      <h4 class="title">arc strokes between quadrant IV and III</h4>
      <p class="description">left arc (CCW) should match right arc (CW)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h2 id="region-tests">region tests</h3>

    <div class="test" id="no-cut-in-line-region-test">
      <h4 class="title">line segment region with no cutins</h4>
      <p class="description">region should look like an arrow</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="cut-in-line-region-test">
      <h4 class="title">line segment region with cutins</h4>
      <p class="description">region should look like an big rectangle with two clear rectangles inside</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="no-cut-in-arc-region-test">
      <h4 class="title">arc region with no cutins</h4>
      <p class="description">region should look like a box with rounded corners</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>
    <div class="test" id="cut-in-arc-region-test">
      <h4 class="title">arc region with cutins</h4>
      <p class="description">region should look like a rectangle with a circular hole</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <h2 id="polarity-tests">level polarity tests</h2>

    <div class="test" id="gerber-spec-example-2">
      <h4 class="title">example 2 from the gerber spec</h4>
      <p class="description">drawing should match the reference (not to scale)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
      <img class="reference" src=./test/gerber/gerber-spec-example-2-reference.png>
    </div>

    <div class="test" id="gerber-spec-example-4-5-8">
      <h4 class="title">example 4.5.8 from the gerber spec</h4>
      <p class="description">drawing should match the reference (not to scale)</p>
      <p class="gerber"></p>
      <div class="svg"></div>
      <img class="reference" src=./test/gerber/gerber-spec-example-4-5-8-reference.png>
    </div>

    <h2 id="step-repeat-tests">step repeat tests</h2>

    <div class="test" id="step-repeat-one-polarity-block-test">
      <h4 class="title">single dark block step repeat test</h4>
      <p class="description">a dark 0.5" square repeated 6 times 0.5" apart</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <div class="test" id="step-repeat-multi-polarity-block-test">
      <h4 class="title">multi polarity single block step repeat test</h4>
      <p class="description">square with hole and solid circle repeated 6</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <div class="test" id="step-repeat-multi-polarity-multi-block-test">
      <h4 class="title">multi polarity multi block step repeat test</h4>
      <p class="description">a circle with a hole covered by four squares with
        holes</p>
      <p class="gerber"></p>
      <div class="svg"></div>
    </div>

    <div class="test" id="step-repeat-overlapping-clear-test">
      <h4 class="title">step repeat overlapping clears test</h4>
      <p class="description">overlapped clears should also clear repeated blocks that are underneath. see the gerber spec (section 4.13) for a description and compare to reference image</p>
      <p class="gerber"></p>
      <div class="svg"></div>
      <img class="reference" src=./test/gerber/step-repeat-overlapping-clear-reference.png>
    </div>

    <script src="./node_modules/jquery/dist/jquery.min.js"></script>
    <script src="./dist/gerber-to-svg.js"></script>
    <script>
    $(".test").each(function(index) {
      var test = $(this);
      var file = test.children('.gerber');
      $.get('../test/gerber/' + test.attr('id') + '.gbr', function(data) {
        file.html(data);
        file.next('.svg').html(gerberToSvg(data));
      });
    });
    </script>
  </body>
</html>
